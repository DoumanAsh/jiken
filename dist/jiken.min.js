!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.jiken=e.jiken||{})}(this,function(e){"use strict";var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n=function(){function e(){this._events={},this.addListener=this.on,this.sync()}return t(e,[{key:"sync",value:function(){var e=this;return this._invoke_listener=function(t,n){return t.apply(e,n)},this}},{key:"not_sync",value:function(e){var t=this;return this._invoke_listener=function(n,i){return setTimeout(function(){return n.apply(t,i)},e||0)},this}},{key:"_throw_on_invalid_listener",value:function(e){if("function"!=typeof e)throw new TypeError("listener must be a function!")}},{key:"_init_event_if",value:function(e){return void 0===this._events[e]&&(this._events[e]=[]),this}},{key:"emit",value:function(e){var t=this._events[e];if(!t||0===t.length)return!1;for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var s=0;s<t.length;s+=1){var u=t[s];u.once&&(u=u.inner,t.splice(s,1),s-=1),this._invoke_listener(u,i)}return 0===t.length&&delete this._events[e],!0}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.emit.apply(this,[e].concat(n)),this}},{key:"eventNames",value:function(){return Object.keys(this._events)}},{key:"listenerCount",value:function(e){return this._events[e]?this._events[e].length:0}},{key:"listeners",value:function(e){return this._events[e]||[]}},{key:"on",value:function(e,t){return this._throw_on_invalid_listener(t),this._init_event_if(e),this._events[e].push(t),this}},{key:"prependListener",value:function(e,t){return this._throw_on_invalid_listener(t),this._init_event_if(e),this._events[e].unshift(t),this}},{key:"once",value:function(e,t){return this._throw_on_invalid_listener(t),this._init_event_if(e),this._events[e].push({once:!0,inner:t}),this}},{key:"prependOnceListener",value:function(e,t){return this._throw_on_invalid_listener(t),this._init_event_if(e),this._events[e].unshift({once:!0,inner:t}),this}},{key:"removeAllListeners",value:function(e){return void 0===e?this._events={}:delete this._events[e],this}},{key:"removeListener",value:function(e,t){this._throw_on_invalid_listener(t);var n=this._events[e];if(n)for(var i=0;i<n.length;i+=1){var r=n[i];if(r.once&&r.inner===t||r===t)return n.splice(i,1),this}return this}}]),e}();e.Jiken=n,Object.defineProperty(e,"__esModule",{value:!0})});
