!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.jiken=e.jiken||{})}(this,function(e){"use strict";var n=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),t=function(){function e(){this._events={},this.addListener=this.on,this.sync()}return n(e,[{key:"sync",value:function(){var e=this;return this._invoke_listener=function(n,t){return n.apply(e,t)},this}},{key:"not_sync",value:function(e){var n=this;return this._invoke_listener=function(t,i){return setTimeout(function(){return t.apply(n,i)},e||0)},this}},{key:"_throw_on_invalid_listener",value:function(e){if("function"!=typeof e)throw new TypeError("listener must be a function!")}},{key:"_init_event_if",value:function(e){return void 0===this._events[e]&&(this._events[e]=[]),this}},{key:"emit",value:function(e){var n=this._events[e];if(!n)return!1;for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(var s=0;s<n.length;s+=1){var o=n[s];if(o.once){if(o=o.inner,n.splice(s,1),s-=1,this._invoke_listener(o,i),0===n.length){delete this._events[e];break}}else this._invoke_listener(o,i)}return!0}},{key:"trigger",value:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return this.emit.apply(this,[e].concat(t)),this}},{key:"eventNames",value:function(){return Object.keys(this._events)}},{key:"listenerCount",value:function(e){return this._events[e]?this._events[e].length:0}},{key:"listeners",value:function(e){var n=this._events[e];return n?n.map(function(e){return e.once?e.inner:e}):[]}},{key:"on",value:function(e,n){return this._throw_on_invalid_listener(n),this._init_event_if(e),this._events[e].push(n),this}},{key:"prependListener",value:function(e,n){return this._throw_on_invalid_listener(n),this._init_event_if(e),this._events[e].unshift(n),this}},{key:"once",value:function(e,n){return this._throw_on_invalid_listener(n),this._init_event_if(e),this._events[e].push({once:!0,inner:n}),this}},{key:"prependOnceListener",value:function(e,n){return this._throw_on_invalid_listener(n),this._init_event_if(e),this._events[e].unshift({once:!0,inner:n}),this}},{key:"removeAllListeners",value:function(e){return void 0===e?this._events={}:delete this._events[e],this}},{key:"removeListener",value:function(e,n){this._throw_on_invalid_listener(n);var t=this._events[e];if(t)for(var i=0;i<t.length;i+=1){var r=t[i];if(r.once&&r.inner===n||r===n)return t.splice(i,1),0===t.length&&delete this._events[e],this}return this}}]),e}();e.Jiken=t,Object.defineProperty(e,"__esModule",{value:!0})});
